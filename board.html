<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知識圖板 - LawsOwl</title>
    <link rel="stylesheet" href="/overview-styles.css?v=1.0.0">
    <link rel="stylesheet" href="../overview-styles.css?v=1.0.0">
    <link rel="icon" href="https://api.iconify.design/material-symbols:owl.svg">
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
          <div class="sidebar-header">
            <div class="logo">
              <img
                src="https://api.iconify.design/material-symbols:owl.svg"
                alt="owl"
                style="filter: invert(1); width: 50px; height: 50px; vertical-align: -4px; margin-right: 8px;"
              />
              <span style="font-size: 2rem;">LawsOS</span>
            </div>
          </div>

          <div class="nav-section">
            <div class="nav-section-title">導覽</div>
            <a href="./" class="nav-item">主頁</a>
            <a href="./board.html" class="nav-item active">知識圖板</a>
            <a href="./case-search.html" class="nav-item">判決查找</a>
            <a href="./lawyer.html" class="nav-item">律師戰歷</a>
            <a href="./judge.html" class="nav-item">法官傾向</a>
            <a href="./ai-pleading.html" class="nav-item">訴狀生成</a>
          </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <header class="page-header hero">
                <h1 class="page-title">
                    <img src="https://api.iconify.design/material-symbols:dashboard-outline.svg" alt="dashboard" style="width:38px;height:38px;vertical-align:-6px;margin-right:10px;">
                    知識圖板
                </h1>
                <p class="page-subtitle">視覺化案件管理 + 智慧連結 + 協作工作流</p>
            </header>

            <!-- 功能摘要 -->
            <section class="content-section">
                <h2 class="section-title">功能摘要</h2>
                <ul class="feature-list">
                    <li>拖拽式節點編輯器，支援案件、律師、法官、判決等多種節點類型</li>
                    <li>智慧連結建議，自動發現相關案例和人物關係</li>
                    <li>即時協作與版本控制，團隊共享知識圖譜</li>
                    <li>AI 輔助分析，自動生成案件洞察和策略建議</li>
                </ul>
            </section>

            <!-- 關鍵畫面 -->
            <section class="content-section">
                <h2 class="section-title">關鍵畫面</h2>
                <div class="screens-grid">
                    <div class="screenshot-card">
                        <div class="window-bar">
                            <span class="dot"></span>
                            <span class="dot"></span>
                            <span class="dot"></span>
                        </div>
                        <div class="shot">節點編輯器</div>
                        <div class="caption">拖拽創建案件、人物、判決節點，建立知識網絡</div>
                    </div>
                    <div class="screenshot-card">
                        <div class="window-bar">
                            <span class="dot"></span>
                            <span class="dot"></span>
                            <span class="dot"></span>
                        </div>
                        <div class="shot">智慧連結</div>
                        <div class="caption">AI 自動建議相關連結，發現隱藏關係</div>
                    </div>
                    <div class="screenshot-card">
                        <div class="window-bar">
                            <span class="dot"></span>
                            <span class="dot"></span>
                            <span class="dot"></span>
                        </div>
                        <div class="shot">協作工作流</div>
                        <div class="caption">團隊即時協作，版本控制與權限管理</div>
                    </div>
                </div>
            </section>

            <!-- 價值主張 -->
            <section class="content-section">
                <h2 class="section-title">價值主張</h2>
                <div class="value-grid">
                    <div class="value-card">
                        <img class="icon-20" src="https://api.iconify.design/material-symbols:speed.svg">
                        <div>
                            <div class="kpi">提升效率 70%</div>
                            <div class="desc">視覺化管理，快速掌握案件全貌</div>
                        </div>
                    </div>
                    <div class="value-card">
                        <img class="icon-20" src="https://api.iconify.design/material-symbols:link.svg">
                        <div>
                            <div class="kpi">發現關聯 +300%</div>
                            <div class="desc">AI 智慧連結，挖掘隱藏關係</div>
                        </div>
                    </div>
                    <div class="value-card">
                        <img class="icon-20" src="https://api.iconify.design/material-symbols:group.svg">
                        <div>
                            <div class="kpi">協作效率 +85%</div>
                            <div class="desc">團隊共享知識，避免重複工作</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 技術特色 -->
            <section class="content-section">
                <h2 class="section-title">技術特色</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <img class="feature-icon" src="https://api.iconify.design/material-symbols:account-tree-outline.svg" alt="nodes">
                        <div class="feature-content">
                            <div class="feature-title">多類型節點</div>
                            <div class="feature-description">支援案件、律師、法官、判決、法條等多種專業節點類型。</div>
                        </div>
                    </div>
                    <div class="feature-card">
                        <img class="feature-icon" src="https://api.iconify.design/material-symbols:auto-awesome-outline.svg" alt="ai">
                        <div class="feature-content">
                            <div class="feature-title">AI 智慧建議</div>
                            <div class="feature-description">自動分析節點關係，建議相關連結和潛在關聯。</div>
                        </div>
                    </div>
                    <div class="feature-card">
                        <img class="feature-icon" src="https://api.iconify.design/material-symbols:sync-outline.svg" alt="sync">
                        <div class="feature-content">
                            <div class="feature-title">即時同步</div>
                            <div class="feature-description">多人協作即時同步，版本控制與衝突解決。</div>
                        </div>
                    </div>
                    <div class="feature-card">
                        <img class="feature-icon" src="https://api.iconify.design/material-symbols:analytics-outline.svg" alt="analytics">
                        <div class="feature-content">
                            <div class="feature-title">深度分析</div>
                            <div class="feature-description">圖譜分析工具，發現關鍵路徑和影響因子。</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
      // Mobile sidebar toggle functionality with scroll-triggered bottom button
      (function(){
        let isOpen = false;
        let btn = null;
        let backdrop = null;

        // Ensure UI exists (button + backdrop). If missing, create them.
        function ensureUI(){
          var body = document.body;
          btn = document.querySelector('.mobile-toggle');
          backdrop = document.querySelector('.sidebar-backdrop');

          if(!btn){
            btn = document.createElement('button');
            btn.className = 'mobile-toggle hide';
            btn.setAttribute('aria-controls','sidebar');
            btn.setAttribute('aria-expanded','false');
            btn.innerHTML = '☰ 導覽';
            body.appendChild(btn);
          }

          if(!backdrop){
            backdrop = document.createElement('div');
            backdrop.className = 'sidebar-backdrop';
            backdrop.setAttribute('aria-hidden','true');
            body.appendChild(backdrop);
          }

          return { btn: btn, backdrop: backdrop };
        }

        // 更新按鈕文字和樣式
        function updateButtonState(){
          if(!btn) return;

          if(isOpen){
            btn.innerHTML = '✕ 關閉';
            btn.classList.add('close-mode');
          } else {
            btn.innerHTML = '☰ 導覽';
            btn.classList.remove('close-mode');
          }
        }

        function open(){
          isOpen = true;
          document.body.classList.add('sidebar-open');
          if(btn) btn.setAttribute('aria-expanded','true');
          updateButtonState();
        }

        function close(){
          isOpen = false;
          document.body.classList.remove('sidebar-open');
          if(btn) btn.setAttribute('aria-expanded','false');
          updateButtonState();
        }

        // 滾動檢測 - 滑到一半時顯示按鈕
        function handleScroll(){
          if(!btn) return;

          const scrollPercent = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight);

          if(scrollPercent > 0.3){ // 滑到30%時顯示
            btn.classList.remove('hide');
            btn.classList.add('show');
          } else {
            btn.classList.remove('show');
            btn.classList.add('hide');
            // 如果按鈕隱藏時導覽是開啟的，則關閉它
            if(isOpen){
              close();
            }
          }
        }

        function init(){
          console.log('Mobile toggle init started');
          var ui = ensureUI();
          btn = ui.btn;
          backdrop = ui.backdrop;
          console.log('Button found:', btn, 'Backdrop found:', backdrop);

          // 滾動事件監聽
          window.addEventListener('scroll', handleScroll);

          // 初始檢查滾動位置
          handleScroll();

          // toggle by click
          btn && btn.addEventListener('click', function(){
            console.log('Button clicked, current state:', isOpen);
            if (isOpen) {
              close();
            } else {
              open();
            }
          });

          // click backdrop to close
          backdrop && backdrop.addEventListener('click', function(){
            console.log('Backdrop clicked');
            close();
          });

          // ESC to close
          document.addEventListener('keydown', function(e){
            if(e.key==='Escape' && isOpen) {
              console.log('ESC pressed');
              close();
            }
          });

          console.log('Mobile toggle init completed');
        }

        if(document.readyState === 'loading'){
          document.addEventListener('DOMContentLoaded', init);
        } else {
          init();
        }
      })();
    </script>

</body>
</html>
